[gd_scene load_steps=15 format=3 uid="uid://cnxvss6ffw3q6"]

[ext_resource type="Texture2D" uid="uid://cb4g6t2q8bkhn" path="res://Sprites/TileHighlights.png" id="1_fqqti"]
[ext_resource type="Script" path="res://Scripts/GameManager.cs" id="1_hioff"]
[ext_resource type="Texture2D" uid="uid://cu82ovp4p6ny6" path="res://Sprites/Tilles.png" id="2_bg0w6"]
[ext_resource type="Texture2D" uid="uid://bm4vmrb0j0oyc" path="res://Sprites/TillesIsometric.png" id="3_nm2yg"]
[ext_resource type="Script" path="res://Scripts/ChessBoard.cs" id="4_wiv1a"]
[ext_resource type="Script" path="res://Scripts/PlayerController.cs" id="5_vcp8c"]
[ext_resource type="Texture2D" uid="uid://gclnaeh12ghs" path="res://Sprites/icon.svg" id="6_qiwh8"]
[ext_resource type="FontFile" uid="uid://bsynkeioac1v" path="res://Quinquefive-ALoRM.ttf" id="7_mqhok"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_0vkjt"]
texture = ExtResource("1_fqqti")
texture_region_size = Vector2i(16, 13)
0:0/next_alternative_id = 2
0:0/0 = 0
0:0/0/z_index = 2
0:0/0/y_sort_origin = 2
0:0/1 = 1
0:0/1/modulate = Color(0.509804, 0.517647, 1, 1)
1:0/0 = 0
1:0/0/z_index = 1
1:0/0/y_sort_origin = 1

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_i74v8"]
texture = ExtResource("2_bg0w6")
0:0/0 = 0
1:0/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_hklkr"]
texture = ExtResource("3_nm2yg")
texture_region_size = Vector2i(16, 13)
0:0/next_alternative_id = 3
0:0/0 = 0
0:0/0/custom_data_0 = true
0:0/1 = 1
0:0/1/modulate = Color(1, 0, 0, 1)
1:0/next_alternative_id = 3
1:0/0 = 0
1:0/0/custom_data_0 = true
1:0/2 = 2
1:0/2/modulate = Color(1, 0, 0, 1)
0:1/0 = 0
1:1/0 = 0

[sub_resource type="TileSet" id="TileSet_gsm5n"]
tile_size = Vector2i(16, 13)
custom_data_layer_0/name = "highlightable"
custom_data_layer_0/type = 1
sources/2 = SubResource("TileSetAtlasSource_i74v8")
sources/3 = SubResource("TileSetAtlasSource_hklkr")
sources/1 = SubResource("TileSetAtlasSource_0vkjt")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nws6i"]
size = Vector2(120, 120)

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_wrgj1"]

[node name="GameTestScene" type="Node2D"]

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(64, 52)
zoom = Vector2(4.6, 4.6)

[node name="GameManager" type="Node2D" parent="."]
script = ExtResource("1_hioff")
board = Object(TileMap,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"clip_children":0,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":3,"texture_repeat":0,"material":null,"use_parent_material":false,"position":Vector2(0, 0),"rotation":0.0,"scale":Vector2(1, 1),"skew":0.0,"tile_set":SubResource("TileSet_gsm5n"),"cell_quadrant_size":16,"collision_animatable":false,"collision_visibility_mode":0,"navigation_visibility_mode":0,"format":2,"layer_0/name":"Board","layer_0/enabled":true,"layer_0/modulate":Color(1, 1, 1, 1),"layer_0/y_sort_enabled":false,"layer_0/y_sort_origin":0,"layer_0/z_index":0,"layer_0/tile_data":PackedInt32Array(0, 3, 0, 1, 65539, 0, 2, 3, 0, 3, 65539, 0, 4, 3, 0, 5, 65539, 0, 6, 3, 0, 7, 65539, 0, 65536, 65539, 0, 131072, 3, 0, 196608, 65539, 0, 262144, 3, 0, 327680, 65539, 0, 393216, 3, 0, 458752, 65539, 0, 524288, 65539, 1, 65537, 3, 0, 131073, 65539, 0, 196609, 3, 0, 262145, 65539, 0, 327681, 3, 0, 393217, 65539, 0, 458753, 3, 0, 524289, 3, 1, 65538, 65539, 0, 131074, 3, 0, 196610, 65539, 0, 262146, 3, 0, 327682, 65539, 0, 393218, 3, 0, 458754, 65539, 0, 524290, 65539, 1, 65539, 3, 0, 131075, 65539, 0, 196611, 3, 0, 262147, 65539, 0, 327683, 3, 0, 393219, 65539, 0, 458755, 3, 0, 524291, 3, 1, 65540, 65539, 0, 131076, 3, 0, 196612, 65539, 0, 262148, 3, 0, 327684, 65539, 0, 393220, 3, 0, 458756, 65539, 0, 524292, 65539, 1, 65541, 3, 0, 131077, 65539, 0, 196613, 3, 0, 262149, 65539, 0, 327685, 3, 0, 393221, 65539, 0, 458757, 3, 0, 524293, 3, 1, 65542, 65539, 0, 131078, 3, 0, 196614, 65539, 0, 262150, 3, 0, 327686, 65539, 0, 393222, 3, 0, 458758, 65539, 0, 524294, 65539, 1, 65543, 3, 0, 131079, 65539, 0, 196615, 3, 0, 262151, 65539, 0, 327687, 3, 0, 393223, 65539, 0, 458759, 3, 0, 524295, 3, 1),"layer_1/name":"Highlights","layer_1/enabled":true,"layer_1/modulate":Color(1, 1, 1, 1),"layer_1/y_sort_enabled":false,"layer_1/y_sort_origin":0,"layer_1/z_index":0,"layer_1/tile_data":PackedInt32Array(),"layer_2/name":"Cursor","layer_2/enabled":true,"layer_2/modulate":Color(1, 1, 1, 1),"layer_2/y_sort_enabled":false,"layer_2/y_sort_origin":0,"layer_2/z_index":0,"layer_2/tile_data":PackedInt32Array(),"script":ExtResource("4_wiv1a"))

movementButton = Object(Button,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"clip_children":0,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":1,"texture_repeat":0,"material":null,"use_parent_material":false,"clip_contents":false,"custom_minimum_size":Vector2(0, 0),"layout_direction":0,"layout_mode":1,"anchors_preset":15,"anchor_left":0.0,"anchor_top":0.0,"anchor_right":1.0,"anchor_bottom":1.0,"offset_left":0.0,"offset_top":112.0,"offset_right":128.0,"offset_bottom":150.0,"grow_horizontal":2,"grow_vertical":2,"rotation":0.0,"scale":Vector2(0.2, 0.2),"pivot_offset":Vector2(0, 0),"size_flags_horizontal":1,"size_flags_vertical":1,"size_flags_stretch_ratio":1.0,"auto_translate":true,"localize_numeral_system":true,"tooltip_text":"","focus_neighbor_left":NodePath(""),"focus_neighbor_top":NodePath(""),"focus_neighbor_right":NodePath(""),"focus_neighbor_bottom":NodePath(""),"focus_next":NodePath(""),"focus_previous":NodePath(""),"focus_mode":2,"mouse_filter":0,"mouse_force_pass_scroll_events":true,"mouse_default_cursor_shape":0,"shortcut_context":null,"theme":null,"theme_type_variation":&"","theme_override_fonts/font":ExtResource("7_mqhok"),"theme_override_font_sizes/font_size":25,"theme_override_styles/focus":SubResource("StyleBoxEmpty_wrgj1"),"disabled":false,"toggle_mode":false,"button_pressed":false,"action_mode":1,"button_mask":1,"keep_pressed_outside":false,"button_group":null,"shortcut":null,"shortcut_feedback":true,"shortcut_in_tooltip":true,"text":"Move","icon":null,"flat":false,"alignment":1,"text_overrun_behavior":0,"clip_text":false,"icon_alignment":0,"vertical_icon_alignment":1,"expand_icon":false,"text_direction":0,"language":"","script":null)

actionButton = Object(Button,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"clip_children":0,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":1,"texture_repeat":0,"material":null,"use_parent_material":false,"clip_contents":false,"custom_minimum_size":Vector2(0, 0),"layout_direction":0,"layout_mode":1,"anchors_preset":15,"anchor_left":0.0,"anchor_top":0.0,"anchor_right":1.0,"anchor_bottom":1.0,"offset_left":32.0,"offset_top":112.0,"offset_right":220.0,"offset_bottom":150.0,"grow_horizontal":2,"grow_vertical":2,"rotation":0.0,"scale":Vector2(0.2, 0.2),"pivot_offset":Vector2(0, 0),"size_flags_horizontal":1,"size_flags_vertical":1,"size_flags_stretch_ratio":1.0,"auto_translate":true,"localize_numeral_system":true,"tooltip_text":"","focus_neighbor_left":NodePath(""),"focus_neighbor_top":NodePath(""),"focus_neighbor_right":NodePath(""),"focus_neighbor_bottom":NodePath(""),"focus_next":NodePath(""),"focus_previous":NodePath(""),"focus_mode":2,"mouse_filter":0,"mouse_force_pass_scroll_events":true,"mouse_default_cursor_shape":0,"shortcut_context":null,"theme":null,"theme_type_variation":&"","theme_override_fonts/font":ExtResource("7_mqhok"),"theme_override_font_sizes/font_size":25,"theme_override_styles/focus":SubResource("StyleBoxEmpty_wrgj1"),"disabled":false,"toggle_mode":false,"button_pressed":false,"action_mode":1,"button_mask":1,"keep_pressed_outside":false,"button_group":null,"shortcut":null,"shortcut_feedback":true,"shortcut_in_tooltip":true,"text":"Attack","icon":null,"flat":false,"alignment":1,"text_overrun_behavior":0,"clip_text":false,"icon_alignment":0,"vertical_icon_alignment":1,"expand_icon":false,"text_direction":0,"language":"","script":null)

endTurnButton = Object(Button,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"clip_children":0,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":1,"texture_repeat":0,"material":null,"use_parent_material":false,"clip_contents":false,"custom_minimum_size":Vector2(0, 0),"layout_direction":0,"layout_mode":1,"anchors_preset":15,"anchor_left":0.0,"anchor_top":0.0,"anchor_right":1.0,"anchor_bottom":1.0,"offset_left":78.0,"offset_top":112.0,"offset_right":326.0,"offset_bottom":150.0,"grow_horizontal":2,"grow_vertical":2,"rotation":0.0,"scale":Vector2(0.2, 0.2),"pivot_offset":Vector2(0, 0),"size_flags_horizontal":1,"size_flags_vertical":1,"size_flags_stretch_ratio":1.0,"auto_translate":true,"localize_numeral_system":true,"tooltip_text":"","focus_neighbor_left":NodePath(""),"focus_neighbor_top":NodePath(""),"focus_neighbor_right":NodePath(""),"focus_neighbor_bottom":NodePath(""),"focus_next":NodePath(""),"focus_previous":NodePath(""),"focus_mode":2,"mouse_filter":0,"mouse_force_pass_scroll_events":true,"mouse_default_cursor_shape":0,"shortcut_context":null,"theme":null,"theme_type_variation":&"","theme_override_fonts/font":ExtResource("7_mqhok"),"theme_override_font_sizes/font_size":25,"theme_override_styles/focus":SubResource("StyleBoxEmpty_wrgj1"),"disabled":false,"toggle_mode":false,"button_pressed":false,"action_mode":1,"button_mask":1,"keep_pressed_outside":false,"button_group":null,"shortcut":null,"shortcut_feedback":true,"shortcut_in_tooltip":true,"text":"End Turn","icon":null,"flat":false,"alignment":1,"text_overrun_behavior":0,"clip_text":false,"icon_alignment":0,"vertical_icon_alignment":1,"expand_icon":false,"text_direction":0,"language":"","script":null)

roundText = Object(RichTextLabel,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"clip_children":0,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":1,"texture_repeat":0,"material":null,"use_parent_material":false,"clip_contents":true,"custom_minimum_size":Vector2(0, 0),"layout_direction":0,"layout_mode":1,"anchors_preset":15,"anchor_left":0.0,"anchor_top":0.0,"anchor_right":1.0,"anchor_bottom":1.0,"offset_left":129.0,"offset_top":0.0,"offset_right":404.0,"offset_bottom":212.0,"grow_horizontal":2,"grow_vertical":2,"rotation":0.0,"scale":Vector2(0.2, 0.2),"pivot_offset":Vector2(0, 0),"size_flags_horizontal":1,"size_flags_vertical":1,"size_flags_stretch_ratio":1.0,"auto_translate":true,"localize_numeral_system":true,"tooltip_text":"","focus_neighbor_left":NodePath(""),"focus_neighbor_top":NodePath(""),"focus_neighbor_right":NodePath(""),"focus_neighbor_bottom":NodePath(""),"focus_next":NodePath(""),"focus_previous":NodePath(""),"focus_mode":0,"mouse_filter":0,"mouse_force_pass_scroll_events":true,"mouse_default_cursor_shape":0,"shortcut_context":null,"theme":null,"theme_type_variation":&"","theme_override_fonts/normal_font":ExtResource("7_mqhok"),"theme_override_font_sizes/normal_font_size":25,"bbcode_enabled":false,"text":"Player: 1
Round: 1","fit_content":false,"scroll_active":true,"scroll_following":false,"autowrap_mode":3,"tab_size":4,"context_menu_enabled":false,"shortcut_keys_enabled":true,"custom_effects":[],"meta_underlined":true,"hint_underlined":true,"threaded":false,"progress_bar_delay":1000,"selection_enabled":false,"deselect_on_focus_loss_enabled":true,"visible_characters":-1,"visible_characters_behavior":0,"visible_ratio":1.0,"text_direction":0,"language":"","structured_text_bidi_override":0,"structured_text_bidi_override_options":[],"script":null)


[node name="ChessBoard" type="TileMap" parent="GameManager"]
texture_filter = 3
tile_set = SubResource("TileSet_gsm5n")
format = 2
layer_0/name = "Board"
layer_0/tile_data = PackedInt32Array(0, 3, 0, 1, 65539, 0, 2, 3, 0, 3, 65539, 0, 4, 3, 0, 5, 65539, 0, 6, 3, 0, 7, 65539, 0, 65536, 65539, 0, 131072, 3, 0, 196608, 65539, 0, 262144, 3, 0, 327680, 65539, 0, 393216, 3, 0, 458752, 65539, 0, 524288, 65539, 1, 65537, 3, 0, 131073, 65539, 0, 196609, 3, 0, 262145, 65539, 0, 327681, 3, 0, 393217, 65539, 0, 458753, 3, 0, 524289, 3, 1, 65538, 65539, 0, 131074, 3, 0, 196610, 65539, 0, 262146, 3, 0, 327682, 65539, 0, 393218, 3, 0, 458754, 65539, 0, 524290, 65539, 1, 65539, 3, 0, 131075, 65539, 0, 196611, 3, 0, 262147, 65539, 0, 327683, 3, 0, 393219, 65539, 0, 458755, 3, 0, 524291, 3, 1, 65540, 65539, 0, 131076, 3, 0, 196612, 65539, 0, 262148, 3, 0, 327684, 65539, 0, 393220, 3, 0, 458756, 65539, 0, 524292, 65539, 1, 65541, 3, 0, 131077, 65539, 0, 196613, 3, 0, 262149, 65539, 0, 327685, 3, 0, 393221, 65539, 0, 458757, 3, 0, 524293, 3, 1, 65542, 65539, 0, 131078, 3, 0, 196614, 65539, 0, 262150, 3, 0, 327686, 65539, 0, 393222, 3, 0, 458758, 65539, 0, 524294, 65539, 1, 65543, 3, 0, 131079, 65539, 0, 196615, 3, 0, 262151, 65539, 0, 327687, 3, 0, 393223, 65539, 0, 458759, 3, 0, 524295, 3, 1)
layer_1/name = "Highlights"
layer_1/enabled = true
layer_1/modulate = Color(1, 1, 1, 1)
layer_1/y_sort_enabled = false
layer_1/y_sort_origin = 0
layer_1/z_index = 0
layer_1/tile_data = PackedInt32Array()
layer_2/name = "Cursor"
layer_2/enabled = true
layer_2/modulate = Color(1, 1, 1, 1)
layer_2/y_sort_enabled = false
layer_2/y_sort_origin = 0
layer_2/z_index = 0
layer_2/tile_data = PackedInt32Array()
script = ExtResource("4_wiv1a")

[node name="Player1" type="Area2D" parent="GameManager/ChessBoard"]
position = Vector2(-21, 10)
script = ExtResource("5_vcp8c")
gridPosition = Vector2i(4, 7)
playerId = 1

[node name="Sprite2D" type="Sprite2D" parent="GameManager/ChessBoard/Player1"]
z_index = 5
scale = Vector2(0.1, 0.1)
texture = ExtResource("6_qiwh8")

[node name="CollisionShape2D" type="CollisionShape2D" parent="GameManager/ChessBoard/Player1"]
scale = Vector2(0.1, 0.1)
shape = SubResource("RectangleShape2D_nws6i")

[node name="Player2" type="Area2D" parent="GameManager/ChessBoard"]
position = Vector2(-21, 25)
script = ExtResource("5_vcp8c")
gridPosition = Vector2i(4, 0)
playerId = 2

[node name="Sprite2D" type="Sprite2D" parent="GameManager/ChessBoard/Player2"]
modulate = Color(1, 0, 0, 1)
z_index = 5
scale = Vector2(0.1, 0.1)
texture = ExtResource("6_qiwh8")

[node name="CollisionShape2D" type="CollisionShape2D" parent="GameManager/ChessBoard/Player2"]
scale = Vector2(0.1, 0.1)
shape = SubResource("RectangleShape2D_nws6i")

[node name="GUI" type="Control" parent="GameManager"]
layout_mode = 3
anchors_preset = 0

[node name="End Turn" type="Button" parent="GameManager/GUI"]
texture_filter = 1
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 78.0
offset_top = 112.0
offset_right = 326.0
offset_bottom = 150.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.2, 0.2)
theme_override_fonts/font = ExtResource("7_mqhok")
theme_override_font_sizes/font_size = 25
theme_override_styles/focus = SubResource("StyleBoxEmpty_wrgj1")
text = "End Turn"

[node name="Move" type="Button" parent="GameManager/GUI"]
texture_filter = 1
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 112.0
offset_right = 128.0
offset_bottom = 150.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.2, 0.2)
theme_override_fonts/font = ExtResource("7_mqhok")
theme_override_font_sizes/font_size = 25
theme_override_styles/focus = SubResource("StyleBoxEmpty_wrgj1")
text = "Move"

[node name="Attack" type="Button" parent="GameManager/GUI"]
texture_filter = 1
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 32.0
offset_top = 112.0
offset_right = 220.0
offset_bottom = 150.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.2, 0.2)
theme_override_fonts/font = ExtResource("7_mqhok")
theme_override_font_sizes/font_size = 25
theme_override_styles/focus = SubResource("StyleBoxEmpty_wrgj1")
text = "Attack"

[node name="RichTextLabel" type="RichTextLabel" parent="GameManager/GUI"]
texture_filter = 1
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 129.0
offset_right = 404.0
offset_bottom = 212.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.2, 0.2)
theme_override_fonts/normal_font = ExtResource("7_mqhok")
theme_override_font_sizes/normal_font_size = 25
text = "Player: 1
Round: 1"

[connection signal="pressed" from="GameManager/GUI/End Turn" to="GameManager" method="EndTurn"]
[connection signal="pressed" from="GameManager/GUI/Move" to="GameManager" method="GetValidMoveTiles"]
